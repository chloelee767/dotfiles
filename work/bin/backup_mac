#!/usr/bin/env bash

# note: function definition with parentheses means it spawns a new subshell
# we use a new subshell so that the set -eou pipefail only affects the function

backup_datagrip() (
    set -eou pipefail

    echo "Backing up datagrip..."

    cd ~/DataGripProjects/carousell/
    git add .
    git commit -m "automated backup"
    git push

    echo "Done backing up datagrip..."
)

backup_misc_files() (
    set -eou pipefail

    echo "Backing up misc files..."

    cd ~/Code/crs-files-backup/
    ./backup.sh

    echo "Done backing up misc files..."
)

backup_datagrip || echo "backup datagrip: exited non-zero"
printf "\n\n"
backup_misc_files || echo "backup misc files: exited non-zero"
